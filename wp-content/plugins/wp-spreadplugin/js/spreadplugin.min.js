/**
 * Plugin Name: WP-Spreadplugin
 * Plugin URI: http://wordpress.org/extend/plugins/wp-spreadplugin/
 * Description: This plugin uses the Spreadshirt API to list articles and let your customers order articles of your Spreadshirt shop using Spreadshirt order process.
 * Version: 3.8.8
 * Author: Thimo Grauerholz
 * Author URI: http://www.spreadplugin.de
 */
 
jQuery(function(e){function i(){e(".spreadplugin-article .colors li,.spreadplugin-article-detail .colors li").unbind(),e(".spreadplugin-article .views li,.spreadplugin-article-detail .views li").unbind(),e(".spreadplugin-article .description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").unbind(),e(".spreadplugin-article .product-description-wrapper div.header,.spreadplugin-article-detail .product-description-wrapper div.header").unbind(),e(".spreadplugin-design .image-wrapper").unbind(),e(".spreadplugin-article form,.spreadplugin-article-detail form").unbind(),e(".spreadplugin-article .edit-wrapper a,.spreadplugin-article-detail .edit-wrapper a").unbind(),e(".spreadplugin-article .edit-wrapper-integrated a,.spreadplugin-article-detail .edit-wrapper-integrated a").unbind(),e(".spreadplugin-article .details-wrapper a,.spreadplugin-article-detail .details-wrapper a").unbind(),e(".spreadplugin-article .image-wrapper,.spreadplugin-article-detail .image-wrapper").unbind(),e(".spreadplugin-article .shipping-window,.spreadplugin-article-detail .shipping-window").unbind(),e(".spreadplugin-article .colors li,.spreadplugin-article-detail .colors li").click(function(){var i="#"+e(this).closest(".spreadplugin-article,.spreadplugin-article-detail").attr("id"),a=e(i+" img.preview"),t=(a.attr("src"),a.attr("data-zoom-image")),r=a.data("elevateZoom");if(u=e(this).attr("value"),g=e(i+" #view").val(),e(i+" #appearance").val(u),a.attr("src",a.attr("src").replace(/\,appearanceId=(\d+)/g,"")+",appearanceId="+u),a.attr("data-zoom-image",t.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"")+",appearanceId="+u+",viewId="+g),e(i+" img.previewview").each(function(){var i=e(this).attr("src");e(this).attr("src",i.replace(/\,appearanceId=(\d+)/g,"")+",appearanceId="+u)}),r){var n=r.imageSrc.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"");n=n+",appearanceId="+u+",viewId="+g,r.imageSrc=n,r.zoomImage=n,r.currentImage=n,r.zoomWindow&&r.zoomWindow.css({backgroundImage:"url('"+n+"')"}),r.zoomLens&&r.zoomLens.css({backgroundImage:"url('"+n+"')"})}}),e(".spreadplugin-article .views li,.spreadplugin-article-detail .views li").click(function(){var i="#"+e(this).closest(".spreadplugin-article,.spreadplugin-article-detail").attr("id"),a=e(i+" img.preview"),t=a.attr("src"),r=a.attr("data-zoom-image"),n=a.data("elevateZoom");if(g=e(this).attr("value"),u=e(i+" #appearance").val(),e(i+" #view").val(g),a.attr("src",t.replace(/\,viewId=(\d+)/g,"").replace(/width=(\d+)/g,"width="+Math.round(a.width())).replace(/height=(\d+)/g,"height="+Math.round(a.height()))+",viewId="+g),a.attr("data-zoom-image",r.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"")+",appearanceId="+u+",viewId="+g),n){var p=n.imageSrc.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"");p=p+",appearanceId="+u+",viewId="+g,n.imageSrc=p,n.zoomImage=p,n.currentImage=p,n.zoomWindow&&n.zoomWindow.css({backgroundImage:"url('"+p+"')"}),n.zoomLens&&n.zoomLens.css({backgroundImage:"url('"+p+"')"})}}),e(".spreadplugin-article .description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").click(function(){var i=e(this).parent().parent().parent(),a=e(this).next();a.is(":hidden")?(i.addClass("activeDescription"),a.show(),e(this).children("a").html(textHideDesc)):(i.removeClass("activeDescription"),e(".description-wrapper div.description").hide(),e(".description-wrapper div.header a").html(textShowDesc))}),e(".spreadplugin-article .product-description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").click(function(){var i=e(this).parent().parent().parent(),a=e(this).next();a.is(":hidden")?(i.addClass("activeDescription"),a.show(),e(this).children("a").html(textProdHideDesc)):(i.removeClass("activeDescription"),e(".product-description-wrapper div.description").hide(),e(".product-description-wrapper div.header a").html(textProdShowDesc))}),e(".spreadplugin-article form,.spreadplugin-article-detail form").submit(function(i){i.preventDefault();var a=e(this).serialize()+"&action=myAjax",t=this,n=e("#"+t.id+" input[type=submit]").not(".add-basket-button"),p=t.id.split("_"),d=p[1],c=e("#previewimg_"+d).width()/3,o=e("#previewimg_"+d).height()/3,l=e("#previewimg_"+d).offset().left,s=e("#previewimg_"+d).offset().top,u=e(".spreadplugin-checkout").offset().left,g=e(".spreadplugin-checkout").offset().top,h=u-l,m=g-s;return n.val(textButtonAdded),e("#article_"+d+" img.preview").clone().prependTo("#article_"+d).css({position:"absolute"}).css({"z-index":"1008"}).animate({opacity:.9},100).animate({opacity:.1,marginLeft:h,marginTop:m,width:c,height:o},1200,function(){e.post(ajaxLocation,a,function(e){n.val(1==e.c.m?textButtonAdd:textButtonFailed),r(e)},"json"),e(this).remove()}),!1}),e(".spreadplugin-article .shipping-window,.spreadplugin-article-detail .shipping-window").magnificPopup({items:{src:"#spreadplugin-shipment-wrapper"},type:"inline",callbacks:{open:function(){e("#spreadplugin-shipment-wrapper").show(),e("#spreadplugin-shipment-wrapper").parent(".mfp-content").css("width",400)},close:function(){e("#spreadplugin-shipment-wrapper").hide()}}}),e(".spreadplugin-article .edit-wrapper-integrated,.spreadplugin-article-detail .edit-wrapper-integrated").click(function(){var i=e(this).data("designid"),a=e(this).data("productid"),t=e(this).data("viewid"),r=e(this).data("appearanceid"),p=e(this).data("producttypeid");e.magnificPopup.open({items:{type:"inline",src:"#spreadplugin-designer-wrapper"},callbacks:{open:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200),n(i,a,t,r,p)},resize:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200)}}})}),2==pageCheckoutUseIframe&&(e(".spreadplugin-article .edit-wrapper a,.spreadplugin-article-detail .edit-wrapper a").magnificPopup({type:"iframe",callbacks:{open:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200)},resize:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200)}}}),e(".spreadplugin-article .details-wrapper a,.spreadplugin-article-detail .details-wrapper a").magnificPopup({type:"iframe",preloader:!0})),e(".spreadplugin-article:not(.min-view) .image-wrapper a,.spreadplugin-article-detail .image-wrapper a").magnificPopup({type:"iframe",preloader:!0}),e(".spreadplugin-design .image-wrapper").click(function(){var i=e(this).parent().attr("id");i="#"+i.replace("design","designContainer"),e(i).is(":hidden")?(e(i).addClass("active"),e(i).slideDown("slow")):e("#spreadplugin-list .design-container").slideUp("slow",function(){e(this).removeClass("active")})})}function a(){e(".spreadplugin-article img.preview,.spreadplugin-article-detail img.preview").unbind(),e("div.spreadplugin-article.min-view").unbind(),e(".spreadplugin-design div.image-wrapper").each(function(){e(this).hover(function(){e(this).find(".img-caption").stop(!0).css("display","inline-block").animate({top:-50},{queue:!1,duration:400})},function(){e(this).find(".img-caption").stop(!0).hide().animate({top:0})})}),1==zoomActivated&&e(".spreadplugin-article img.preview,.spreadplugin-article-detail img.preview").hover(function(){e(this).elevateZoom(zoomConfig)}),e(".spreadplugin-article ul.soc-icons a,.spreadplugin-article-detail ul.soc-icons a").hover(function(){e(this).parent().css("background-color",e(this).attr("data-color"))},function(){e(this).parent().removeAttr("style")}),e("div.spreadplugin-article.min-view").hover(function(){e(this).addClass("active")},function(){e(this).removeClass("active")});var i=1;e("div.spreadplugin-article.min-view").css("opacity",i).hover(function(){e(this).prevAll().stop().not(".clear,#infscr-loading").fadeTo("slow",.6),e(this).nextAll().stop().not(".clear,#infscr-loading").fadeTo("slow",.6)},function(){e(this).prevAll().stop().not(".clear,#infscr-loading").fadeTo("slow",i),e(this).nextAll().stop().not(".clear,#infscr-loading").fadeTo("slow",i)})}function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",a=new RegExp(i),t=a.exec(window.location.search);return null==t?"":encodeURIComponent(decodeURIComponent(t[1].replace(/\+/g," ")))}function r(i){e(".spreadplugin-checkout a").attr("href",i.c.u),e(".spreadplugin-checkout a").removeAttr("title"),e(".spreadplugin-checkout span").text(i.c.q),e(".spreadplugin-cart-checkout a").attr("href",i.c.u),e.get(ajaxLocation,"action=myCart",function(i){if(e(".spreadplugin-cart").html(i),1==pageCheckoutUseIframe&&e(".spreadplugin-cart-checkout a").click(function(i){i.preventDefault();var a=e(this).attr("href");"undefined"!=typeof a&&a.length>0&&(e("#spreadplugin-items #pagination").remove(),e("#spreadplugin-items #spreadplugin-menu").remove(),e(window).unbind(".infscr"),e("#spreadplugin-list").html('<iframe style="z-index:10002" id="checkoutFrame" frameborder="0" width="900" height="2000" scroll="yes">'),e("#spreadplugin-list #checkoutFrame").attr("src",a),e("html, body").animate({scrollTop:e("#spreadplugin-items #checkoutFrame").offset().top},2e3))}),2==pageCheckoutUseIframe){var a=e(".spreadplugin-cart-checkout a").attr("href");"undefined"!=typeof a&&a.length>0&&e(".spreadplugin-cart-checkout a").magnificPopup({type:"iframe",callbacks:{close:function(){location.reload()}}})}e(".cart-row a.deleteCartItem").click(function(i){i.preventDefault,e(this).closest(".cart-row").show().fadeOut("slow"),e.post(ajaxLocation,"action=myDelete&id="+e(this).closest(".cart-row").data("id"),function(){})})})}function n(i,a,t,n,d){e("#Confomat").length&&(designerTargetId="Confomat"),confomat.create({shopId:designerShopId,targetId:designerTargetId,platform:designerPlatform,locale:designerLocale,width:designerWidth,designId:i,productId:a,appearanceId:n,viewId:t,productTypeId:d,calculatePriceFunction:function(e){return 1.5*e.price},addToBasketFunction:function(i,a){var t={article:i.productId,size:i.sizeId,appearance:i.appearanceId,quantity:i.quantity,shopId:i.shopId,action:"myAjax",type:"1"};e.post(ajaxLocation,t,function(e){a(1==e.c.m?!0:!1),r(e)},"json")},checkoutFunction:function(){e(".spreadplugin-checkout-link").trigger("click")}},{className:"conformat-designer"},function(e,i){e?(e=e===!0?"Some error occurred":e,alert(e)):p=i})}var p,d="?",c=t("productCategory"),o=t("productSubCategory"),l=t("articleSortBy"),s=".spreadplugin-article",u="",g="";if(1==display&&(s=".spreadplugin-designs"),pageLink.indexOf("?")>-1&&(d="&"),e(".spreadplugin-cart").hide(),e(document).click(function(i){"spreadplugin-checkout-link"!=i.target.className&&"spreadplugin-checkout-link button"!=i.target.className&&e(".spreadplugin-cart").is(":visible")&&!e(".spreadplugin-cart").find(i.target).length&&e(".spreadplugin-cart").hide()}),e(".spreadplugin-items select").hover(function(e){e.stopPropagation()}),0!=e(".spreadplugin-menu").length){var h=e("#spreadplugin-menu").offset().top-parseFloat(e("#spreadplugin-menu").css("margin-top").replace(/auto/,0));e(window).scroll(function(){var i=e(this).scrollTop();i>=h-0?(e("#spreadplugin-menu").addClass("fixed"),e("#spreadplugin-menu").css("width",e("div.spreadplugin-items").width())):(e("#spreadplugin-menu").css("width",""),e("#spreadplugin-menu").removeClass("fixed"))})}e(window).resize(function(){e(".img-caption").hide()}),1==infiniteScroll&&e("#spreadplugin-list").infinitescroll({nextSelector:"#spreadplugin-items #pagination a",navSelector:"#spreadplugin-items #pagination",itemSelector:"#spreadplugin-list "+s,loading:{img:loadingImage,msgText:loadingMessage,finishedMsg:loadingFinishedMessage},animate:!0,debug:!1,bufferPx:40},function(){i(),a(),1==lazyLoad&&e("img.lazyimg").lazyload({effect:"fadeIn"})}),e("#spreadplugin-items #productCategory").change(function(){c=e(this).val(),document.location=pageLink+d+"productCategory="+c+"&articleSortBy="+l}),e("#spreadplugin-items #productSubCategory").change(function(){o=e(this).val(),document.location=pageLink+d+"productCategory="+c+"&productSubCategory="+o+"&articleSortBy="+l}),e("#spreadplugin-items #articleSortBy").change(function(){l=e(this).val(),document.location=pageLink+d+"productCategory="+c+"&productSubCategory="+o+"&articleSortBy="+l}),e(".spreadplugin-checkout-link").click(function(i){i.preventDefault();var a=e(this).parent().next(".spreadplugin-cart");a.is(":hidden")?a.show():a.hide()}),e.post(ajaxLocation,"action=myAjax",function(e){r(e)},"json"),setInterval(function(){e.post(ajaxLocation,"action=myAjax",function(e){r(e)},"json")},1e4),i(),a(),1==lazyLoad&&e("img.lazyimg").lazyload({effect:"fadeIn"}),e("#spreadplugin-tabs li a").click(function(){return e("#spreadplugin-tabs li").removeClass("active"),e(this).parent().addClass("active"),e(".spreadplugin-tab_content").hide(),e(e(this).parent().find("a").attr("href")).fadeIn(),!1})});